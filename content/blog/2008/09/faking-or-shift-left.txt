--- 
title:      Faking "or shift left"
created_at: 2008-09-04 01:30:11.614269 -05:00
blog_post:  true
layout: post
filter:
  - erb
---
<p>
I've often been annoyed at the lack of <code>||<<</code> after being spoiled with <code>||=</code> for so long. The workaround I've typically used is to go ahead and use <code>||= [ ]</code> to make sure I have an empty array. That's ugly though. You're dropping down a level and writing the "how" instead of the "why". 
</p>
<p>
Today some code <a href=http://blog.jayfields.com/2008/09/ruby-recording-method-calls-and.html>Jay Fields posted</a> had the answer I've been looking for. It's not quite as elegant has having the operator itself, but it does the job of tucking away the ugly detail of ensuring you have an empty array to shift on.
</p>
<%- coderay(:lang => "ruby", :line_numbers => "inline") do -%>
def method_stack
  @method_stack ||= []
end
 
def method_missing(sym, *args)
  method_stack << [sym, args]
  self
end
<%- end -%>

We're still using <code>||= [ ]</code> but it is hidden away in its own spot, which I find to be much cleaner.
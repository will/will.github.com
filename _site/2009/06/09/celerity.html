<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Quick Guide to Celerity</title>
   <meta name="author" content="Tom Preston-Werner" />
   <link href="http://feeds.feedburner.com/tom-preston-werner" rel="alternate" title="Tom Preston-Werner" type="application/atom+xml" />

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />

   <!-- Typekit -->
   <script type="text/javascript" src="http://use.typekit.com/jpd0pfm.js"></script>
   <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body>

<!-- ClickTale Top part -->
<script type="text/javascript">
var WRInitTime=(new Date()).getTime();
</script>
<!-- ClickTale end of Top part -->

<div class="site">
  <div class="title">
    <a href="/">Tom Preston-Werner</a>
    <a class="extra" href="/">home</a>
  </div>
  
  <div id="post">
<p>I&#8217;ll assume you already know and love <a href="http://wiki.github.com/aslakhellesoy/cucumber">Cucumber</a> and are using it. I&#8217;ll go even farther and assume you&#8217;re writing your steps in <a href="http://gitrdoc.com/brynary/webrat/tree/master/">Webrat</a> since that&#8217;s what cucumber ships with. Now, I really like webrat. It&#8217;s a wonderful <span class="caps">DSL</span> and fun to work with, but it does have one problem: no javascript, no ajax.</p>
<h3>Enter Celerity</h3>
<p><a href="http://celerity.rubyforge.org/">Celerity</a> is a headless browser for jruby that can do javascript. Now you can run your cucumber features that need to do ajax calls, and stay on the command line or CI box. It gets better though. The <span class="caps">API</span> is compatible with Watir, so you have the option of driving a real browser at any time. It&#8217;s not as expressive as webrat, but since you reusing cucumber steps is easy, it&#8217;s not a huge deal.</p>
<h3>Don&#8217;t want jruby?</h3>
<p>If you don&#8217;t want to run your whole app in jruby, checkout <a href="http://github.com/langalex/culerity/tree/master">langalex-culerity</a>. It&#8217;s a gem that will let you drive celerity from mri. It also comes with a <code>common_celerity.rb</code> file to replace most of your <code>webrat_steps</code>. We ran into a few steps that were missing or worked a little differently, but porting over didn&#8217;t take long at all.</p>
<h3>That&#8217;s it!</h3>
<p>Honestly, there&#8217;s not much to getting it working, so I&#8217;ve skipped doing a detailed step-by-step style guide. The documentation on getting jruby, celerity, and culerity installed is all you need. There weren&#8217;t any surprises. If your app has uses a fair amount of javascript, it&#8217;s worth your time to check this out.</p>



</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>10 Oct 2010</span> &raquo; <a href="/2010/10/10/some-talks.html">Some Talks</a></li>
    
      <li><span>16 Jul 2010</span> &raquo; <a href="/2010/07/16/auto-mege-gemfile-lock.html">Auto Merge Gemfile.lock</a></li>
    
      <li><span>01 May 2010</span> &raquo; <a href="/2010/05/01/rails_integration_stack_for_winners.html">Rails Integration Testing Stack for Winners</a></li>
    
  </ul>
</div>
  
  <div class="footer">
    <div class="contact">
      <p>
        Tom Preston-Werner<br />
        Cofounder of <a href="http://github.com/">GitHub</a><br />
        tom@mojombo.com
      </p>
    </div>
    <div class="contact">
      <p>
        <a href="http://github.com/mojombo/">github.com/mojombo</a><br />
        <a href="http://twitter.com/mojombo/">twitter.com/mojombo</a><br />
        <a href="http://flickr.com/photos/mojombo/">flickr.com/photos/mojombo</a>
      </p>
    </div>
    <div class="rss">
      <a href="http://feeds.feedburner.com/tom-preston-werner">
        <img src="/images/rss.png" alt="Subscribe to RSS Feed" />
      </a>
    </div>
  </div>
</div>

<a href="http://github.com/mojombo"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>

<!-- ClickTale Bottom part -->
<div id="ClickTaleDiv" style="display: none;"></div>
<script type="text/javascript">
if(document.location.protocol!='https:')
  document.write(unescape("%3Cscript%20src='http://s.clicktale.net/WRb.js'%20type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
if(typeof ClickTale=='function') ClickTale(206,0.3,"www03");
</script>
<!-- ClickTale end of Bottom part -->

<!-- Google Analytics -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-6016902-1");
pageTracker._trackPageview();
</script>
<!-- Google Analytics end -->

</body>
</html>

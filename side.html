<body background='img/gif.gif'>
<table border=1 bgcolor='white'>
  <tr><td>
    <h2>My pages</h2>
    <ul>
      <li><a href='about.html' target='main'>ABOUT</a> Will!
      <li><a href='/talks' target='main'>TALKS</a> I've given or will soon give <img src=/img/hot.gif>
      <li><a href='/blog' target='main'>BLOG</a> I don't write in often
    </ul>
  </td></tr>

  <tr><td>
    <h2>Other sites</h2>
    <ul>
      <li><a href='http://github.com/will' target=_new>github: will</a>
      <li><a href='http://twitter.com/leinweber' target=_new>twitter: @leinweber</a>
    </ul>
  </td></tr>

  <tr><td align=center bgcolor="#000000">
      <marquee behavior="alternate"><font color="#00FF00" size="+1"><span id="hitcounter">hits</span></font></marquee>
  </td></tr>

  <script>
    var request = new XMLHttpRequest();
    request.open("GET", "https://bitfissionhitcounter.herokuapp.com/", true);
    request.onload = function() {
      var data = JSON.parse(request.responseText);
      el = document.querySelectorAll("#hitcounter")[0];
      console.log(el, data.count)
      el.textContent = data.count + " hits!";
    };
    request.send();
  </script>

  <tr><td align="center">
    <button onclick="randomSong()" value='new song'>new random song!</button>
    <br />
    <input type='radio' name='ext' value='mid' id='extmid' onchange="setExt('mid')"><label for='mid'>midi</label>
    <input type='radio' name='ext' value='mp3' id='extmp3' onchange="setExt('mp3')"><label for='mp3'>mp3</label>
  </td></tr>
  <tr><td align="center">
    <div id='player'><button onClick='randomSong()'>PLAY MUSIC!</button></div>
    <script type='text/javascript'>
      function randomSong() {
        var tracks = [
          {artist: 'radiohead', file: 'subterranean_homesick_alien' }
        , {artist: 'radiohead', file: 'street_spirit' }
        , {artist: 'radiohead', file: 'no_surprises' }
        , {artist: 'natalie imbruglia', file: 'torn' }
        , {artist: 'marcy playground', file: 'sex_and_candy' }
        , {artist: 'weezer', file: 'buddy_holly' }
        , {artist: 'eagle eye cherry', file: 'save_tonight' }
        , {artist: 'ben folds five', file: 'brick' }
        , {artist: 'lit', file: 'my_own_worst_enemy' }
        , {artist: 'sublime', file: 'what_i_got' }
        , {artist: 'sublime', file: 'santeria' }
        , {artist: 'reel big fish', file: 'sell_out' }
        , {artist: 'cherry poppin daddies', file: 'zoot_suit_riot' }
        , {artist: 'id software', file: 'doom' }
        , {artist: 'nirvana', file: 'smells_like_teen_spirit' }
        , {artist: 'foo fighters', file: 'everlong' }
        ]
        var track = tracks[Math.floor(Math.random()*tracks.length)]
        var playerHTML = '<marquee>' + track.file.replace(/_/g,' ') + ' - ' + track.artist + '</marquee>'
        playerHTML += '<embed src="mid/' + track.file + '.' + getExt() + '" loop=true width=160></embed>'
        document.getElementById('player').innerHTML = playerHTML
      }
      function setExt(ext) {
        window.localStorage['ext'] = ext
      }
      function getExt() {
        return window.localStorage['ext']
      }


      if (! getExt() ) {
        setExt('mp3')
      }
      document.getElementById('ext' + getExt()).checked = true

      if (window.parent.location.search !== "?music=nofun") {
        randomSong()
      }

    </script>
  </td></tr>
</table>

<script src='/site.js'> </script>

